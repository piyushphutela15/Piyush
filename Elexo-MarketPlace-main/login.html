<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Login</title>
     <!-- Bootstrap -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
     <!-- Icon -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
     <link rel="stylesheet" href="login.css">
</head>
<body>
     
     <!-- NavBar -->
     <nav class="navBar">
          <a href="index.html" class="icons">
               <i class="fa-solid fa-house"></i>
          </a>
 
          <a class="brannd" href="index.html">
               <img src="images/Elecxo 1.png" alt="Elecxo Logo" width="102px" height="46px">
          </a>
     </nav>

     <section class="row">
          <div class="col-md-6 left">
               <div class="brand"> <img src="images/Elecxo 1.png" alt=""> </div>
               <div class="advert"><span>Log</span>in</div>
               <div class="catch">Shop the best of electronic, Grab the deals, Offers and more.</div>
          </div>
          <div class="col-md-6 right">
               <div class="login-form">
                    <form action="http://localhost:2020/api/v1/auth/login" method="post" id="loginForm">
                         <div class="form-group">
                              <div class="eachInput">
                                   <div class="error Msgemail">Incorrect</div>
                                   <input type="text" name="email" id="email" class="form-control" placeholder="Email">
                              </div>
                              <div class="eachInput">
                                   <div class="error  MsgPassword">Incorrect</div>
                                   <input type="password" name="password" id="password" class="form-control" placeholder="Password">
                              </div>

                              <a class="forget">Forget Password?</a>

                              <button type="submit" class="login">Login</button>
                         </div>

                         <div class="orr"><span></span> Or <span></span></div>

                         <div class="signup">
                              <span>New ? Create an account</span>
                              <a href="signUp.html">Sign Up</a>
                         </div>
                    </form>
               </div>
          </div>
     </section>


     <!-- Font Awsome Link -->
     <script src="https://kit.fontawesome.com/2a49fbdbb8.js" crossorigin="anonymous"></script>
     <!-- Bootstrap JS -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-5pQxFJdgv0Mm2JLDAwIvYv4pO3U5E6fY6b7Z1R+U2mzKx2t6ug5s6G2O3u8z+Z5J" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
     <script>
          document.querySelector('#loginForm').addEventListener('submit', function (event) {
               event.preventDefault();

               const email = document.querySelector('#email').value;
               const password = document.querySelector('#password').value;

               axios.post('http://localhost:2020/api/v1/auth/login', { email, password })
               .then(function (response) {
                    console.log("Login successful");

                    const token = response.data.token;
                    const role = response.role;

                    localStorage.setItem('token', token);

                    window.location.href = '/dashboard.html';
               })
               .catch(function (error) {
                    console.log('Login failed:', error.response.data);
               })
          });
     </script>
</body>
</html>